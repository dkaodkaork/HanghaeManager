<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>

        @font-face {
            font-family: 'Cafe24Ssurround';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24Ssurround.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'S-CoreDream-5Light';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --color-1: #FCE4EC;
            --color-2: rgba(194, 24, 91, 0.55);
            --color-3: #E0F2F1;
            --color-4: rgba(0, 121, 107, 0.31);
            --color-5: rgb(0, 121, 107);
            --font-point: Cafe24Ssurround;
            --font-basic: S-CoreDream-3Light;
        }

        * {
            margin: 0;
            padding: 0
        }

        body{
            background-color: var(--color-3);
        }

        .container {
            width: 80%;
            min-width: 600px;
            max-width: 900px;

            height: 100%;
            background-color: #E0F2F1;

            position: absolute;
            left: 38%;
            margin-left: -250px;

        }

        .title {
            font-size: 20px;
            font-family: var(--font-point)
        }

        .body-header {
            height: 10rem;
            background-color: var(--color-4);
        }

        .bi-house {
            margin-top: 10%;
            margin-left: 10%;
        }

        .graph-box {
            width: 60%;

            background-color: var(--color-2);
        }


        .til-box {
            text-align: center;
            width: 100%;
            height: 25%;

            margin-top: 10px;


            display: flex;
            flex-direction: row;
        }

        .my-til-score {
            width: 20%;
            font-size: 30px;
            font-weight: bold;


        }

        .my-til-rank {
            width: 20%;
            font-size: 30px;
            font-weight: bold;

        }

        .my-til-score-background, .my-til-rank-background {
            position: relative;
        }

        .my-til-score-background > img, .my-til-rank-background > img {
            margin-top: 7px;

        }

        .my-til-score-background > p, .my-til-rank-background > p {
            position: absolute;
            top: 35%;
            left: 41%;
            color: var(--color-5);

        }

        .submit-box {
            width: 100%;
            height: 10%;
            margin-top: 10px;
            margin-left: 20px;
        }

        .submit-box > div {
            margin: 1rem;
        }

        .submit-box > div > button {
            font-size: 15px;
            font-weight: bold;
            padding: 12px;
            margin-left: 10px;
            width: 100px;
            height: 40px;
            border-radius: 10px;
            background-color: var(--color-5);
            border: 1px solid var(--color-5);
            color: white;

        }

        .submit-box > div > button:hover {
            border: 2px solid white;
        }

        input {

            width: 500px;
            height: 40px;
            font-size: 16px;
            color: var(--color-5);
            border: 0;
            border-radius: 15px;
            outline: none;
            padding-left: 20px;

            background-color: var(--color-4);

        }


        .my-post {
            width: 100%;
            height: 36%;
            margin-top: 20px;
            background-color: var(--color-3);

        }

        .my-post-list {
            margin-top: 20px;
            width: 100%;
            height: 90%;
            overflow: scroll;
        }

        .one-post-line {
            margin-top: 15px;
            margin-left: 30px;

            text-align: center;
            width: 91%;
            display: flex;
        }

        .one-post-info {
            display: flex;
            align-items: center;
            background-color: white;
            width: 100%;
            height: 40px;
            border-radius: 10px;
        }

        .one-post-info:hover {
            border: 2px solid var(--color-4);
        }

        .one-post-line > button {
            margin-left: 10px;
            width: 70px;
            padding: 10px;

            color: white;
            font-weight: bold;
            border-radius: 10px;
            background-color: var(--color-5);
            border: 1px solid var(--color-5);

        }

        .post-num {
            font-weight: bold;
            margin-left: 20px;
            margin-right: 10px;
            display: inline-block;
        }

        .post-title {
            width: 78%;
            display: inline-block;

        }

        .post-heart {
            font-weight: bold;
            display: inline-block;
            width: 10%;
        }


        button:hover {
            border: 2px solid white;
        }


    </style>
    <script>

        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "/mypage/data",
                data: {},
                success: function (response) {
                    console.log(response['question_list'])
                    const question_list = response['question_list'];


                    for (let i = 0; i < question_list.length; i++) {
                        console.log(question_list[i]);
                        let question_id = question_list[i]['question_id'];
                        let main_ability = question_list[i]['main_ability'];
                        let question_title = question_list[i]['question_title'];
                        let q_heart_count = question_list[i]['q_heart_count'];

                        let title = main_ability + ": " + question_title.substring(0, 20) + " ãƒ»ãƒ»ãƒ»ãƒ»ãƒ»"

                        let temp_html = `<div class="one-post-line">
                                            <div class="one-post-info" onclick="move_post(${question_id})">
                                                <span class="post-num" style="display: inline-block">${i + 1}</span>
                                                <span class="post-title">${title}</span>
                                                <span class="post-heart"> ğŸ’› ï¸${q_heart_count}</span>
                                            </div>
                                            <button>ìˆ˜ì •</button>
                                            <button>ì‚­ì œ</button>
                                         </div>`


                        $('.my-post-list').append(temp_html)
                    }


                }
            })

        })

        function move_post(question_id) {
            alert('hi')
        }

        function url_submit() {
            url = $('#url-text').val()
            console.log(url)
            url_check = url.substring(0, 4)

            if (url.length > 15 && url_check === "http") {
                $.ajax({
                    type: "POST",
                    url: "/mypage/til/keeping",
                    data: {
                        'til_url': url,
                        'til_count': til_count,
                    },
                    success: function (response) {
                        alert(response['message']);
                        window.location.reload();

                    }
                })
            } else {
                let message = "ì •í™•í•œ ë§í¬ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”!"
                alert(message);
            }

        }


    </script>
</head>
<body>
<div class="container">
    <div class="body-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill=var(--color-5) class="bi-house"
             viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
            <path fill-rule="evenodd"
                  d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
        </svg>
    </div>

    <p style="font-size: 26px; margin-left: 30px; font-family: var(--font-point);"> {{user_name}}ë‹˜ì˜ TIL í˜„í™©</p>
    <div class="til-box">
        <div class="graph-box">
            <p style="font-size: 20px; margin-left: 30px; font-family: var(--font-point);">í™œë™ ê·¸ë˜í”„</p>
            <div class="til-graph">

            </div>
        </div>
        <div class="my-til-score">
            <p class="title">ë‚˜ì˜ TIL ì ìˆ˜</p>
            <div class="my-til-score-background">
                <img style="height: 9rem" src="/static/img/mypage_score.png">
                <p style="font-size: 30px; font-weight: bold;">{{til_count}}</p>
            </div>
        </div>
        <div class="my-til-rank">
            <p class="title">ë‚˜ì˜ TIL ë­í‚¹</p>
            <div class="my-til-rank-background">
                <img style="height: 9rem" src="/static/img/mypage_rank.png">
                <p> 20</p>

            </div>
        </div>

    </div>
    <div class="submit-box">
        <p class="title" style="margin-left: 15px">ì˜¤ëŠ˜ì˜ TIL ì œì¶œí•˜ê¸°</p>
        <div class="url-box">
            <input id="url-text" type="text" placeholder="ë§í¬ë¥¼ ì œì¶œí•´ì£¼ì„¸ìš”."/>
            <button onclick="url_submit()">ì œì¶œí•˜ê¸°</button>
        </div>
    </div>

    <div class="my-post">
        <p class="title" style="margin-left: 30px;"> ë‚˜ì˜ ê²Œì‹œê¸€ ëª©ë¡</p>
        <div class="my-post-list">
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>
            <div class="one-post-line">
                <div class="one-post-info">
                    <span class="post-num" style="display: inline-block">1</span>
                    <span class="post-title">ì œëª©ì´ì–€ã…‡ë¦°ã„¹ã„´ë¼ë‹ˆë¼ë‹ˆëŸ¬ã…£ã„´ë¨¸;ë¦¬ë„ˆ ã…£ë„ë¦¬ë„ã„¹ </span>
                    <span class="post-heart"> ğŸ’›ï¸ ï¸30</span>
                </div>
                <button>ìˆ˜ì •</button>
                <button>ì‚­ì œ</button>
            </div>


        </div>
    </div>

</div>
</body>
</html>